// jonson.js - Versão Final Revisada

// Função para processar respostas JSON de forma segura
export function handleJSON(response) {
  try {
    // Caso venha como string JSON
    if (typeof response === 'string') {
      return JSON.parse(response);
    }

    // Se já for objeto, retorna direto
    if (typeof response === 'object' && response !== null) {
      return response;
    }

    // Se não for nenhum dos dois, retorna mensagem de erro
    return { error: 'Resposta inválida' };
  } catch (err) {
    console.error('Erro ao processar JSON:', err);
    return { error: 'Falha ao processar JSON' };
  }
}
